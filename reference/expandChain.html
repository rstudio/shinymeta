<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Expand code objects — expandChain • shinymeta</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Expand code objects — expandChain"><meta property="og:description" content="Use expandChain to write code out of one or more metaReactive objects.
Each meta-reactive object (expression, observer, or renderer) will cause not
only its own code to be written, but that of its dependencies as well."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">shinymeta</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/code-generation.html">Code generation</a>
</li>
<li>
  <a href="../articles/code-distribution.html">Code distribution</a>
</li>
<li>
  <a href="../articles/special-topics.html">Special topics</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rstudio/shinymeta/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Expand code objects</h1>
    <small class="dont-index">Source: <a href="https://github.com/rstudio/shinymeta/blob/HEAD/R/metareactive.R" class="external-link"><code>R/metareactive.R</code></a></small>
    <div class="hidden name"><code>expandChain.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use <code>expandChain</code> to write code out of one or more metaReactive objects.
Each meta-reactive object (expression, observer, or renderer) will cause not
only its own code to be written, but that of its dependencies as well.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">newExpansionContext</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">expandChain</span><span class="op">(</span><span class="va">...</span>, .expansionContext <span class="op">=</span> <span class="fu">newExpansionContext</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>...</dt>
<dd><p>All arguments must be unnamed, and must be one of: 1) calls to
meta-reactive objects, 2) comment string (e.g. <code>"# A comment"</code>), 3)
language object (e.g. <code>quote(print(1 + 1))</code>), or 4) <code>NULL</code> (which will be
ignored). Calls to meta-reactive objects can optionally be <code><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible()</a></code>,
see Details.</p></dd>


<dt>.expansionContext</dt>
<dd><p>Accept the default value if calling <code>expandChain</code> a
single time to generate a corpus of code; or create an expansion context
object using <code>newExpansionContext()</code> and pass it to multiple related calls
of <code>expandChain</code>. See Details.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The return value of <code>expandChain()</code> is a code object that's suitable for
printing or passing to <code><a href="displayCodeModal.html">displayCodeModal()</a></code>, <code><a href="buildScriptBundle.html">buildScriptBundle()</a></code>, or
<code><a href="buildScriptBundle.html">buildRmdBundle()</a></code>.</p>


<p>The return value of <code>newExpansionContext</code> is an object that should be
passed to multiple <code>expandChain()</code> calls.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>There are two ways to extract code from meta objects (i.e. <code><a href="metaReactive.html">metaReactive()</a></code>,
<code><a href="metaObserve.html">metaObserve()</a></code>, and <code><a href="metaRender.html">metaRender()</a></code>): <code><a href="withMetaMode.html">withMetaMode()</a></code> and <code>expandChain()</code>.
The simplest is <code>withMetaMode(obj())</code>, which crawls the tree of meta-reactive
dependencies and expands each <code><a href="dotdot.html">..()</a></code> in place.</p>
<p>For example, consider these meta objects:</p><div class="sourceCode"><pre><code><span>    <span class="va">nums</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/metaReactive.html">metaReactive</a></span><span class="op">(</span><span class="op">{</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span> <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/metaObserve.html">metaObserve</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/dotdot.html">..</a></span><span class="op">(</span><span class="fu">nums</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="fu"><a href="../reference/dotdot.html">..</a></span><span class="op">(</span><span class="fu">nums</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span></code></pre></div>

<p>When code is extracted using <code>withMetaMode</code>:</p><div class="sourceCode"><pre><code><span>    <span class="fu"><a href="../reference/withMetaMode.html">withMetaMode</a></span><span class="op">(</span><span class="fu">obs</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>The result looks like this:</p><div class="sourceCode"><pre><code><span>    <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>Notice how <code>runif(100)</code> is inlined wherever <code>..(nums())</code>
appears, which is not desirable if we wish to reuse the same
values for <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> and <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>.</p>
<p>The <code>expandChain</code> function helps us workaround this issue
by assigning return values of <code><a href="metaReactive.html">metaReactive()</a></code> expressions to
a name, then replaces relevant expansion (e.g., <code>..(nums())</code>)
with the appropriate name (e.g. <code>nums</code>).</p><div class="sourceCode"><pre><code><span>    <span class="fu"><a href="../reference/expandChain.html">expandChain</a></span><span class="op">(</span><span class="fu">obs</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>The result looks like this:</p><div class="sourceCode"><pre><code><span>    <span class="va">nums</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">nums</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">nums</span><span class="op">)</span></span></code></pre></div>

<p>You can pass multiple meta objects and/or comments to <code>expandChain</code>.</p><div class="sourceCode"><pre><code><span>    <span class="fu"><a href="../reference/expandChain.html">expandChain</a></span><span class="op">(</span></span>
<span>      <span class="st">"# Generate values"</span>,</span>
<span>      <span class="fu">nums</span><span class="op">(</span><span class="op">)</span>,</span>
<span>      <span class="st">"# Summarize and plot"</span>,</span>
<span>      <span class="fu">obs</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>

<p>Output:</p><div class="sourceCode"><pre><code><span>    <span class="co"># Load data</span></span>
<span>    <span class="va">nums</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span>    <span class="va">nums</span></span>
<span>    <span class="co"># Inspect data</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">nums</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">nums</span><span class="op">)</span></span></code></pre></div>

<p>You can suppress the printing of the <code>nums</code> vector in the previous example by
wrapping the <code>nums()</code> argument to <code>expandChain()</code> with <code>invisible(nums())</code>.</p>
    </div>
    <div id="preserving-dependencies-between-expandchain-calls">
    <h2>Preserving dependencies between <code>expandChain()</code> calls</h2>
    


<p>Sometimes we may have related meta objects that we want to generate code for,
but we want the code for some objects in one code chunk, and the code for
other objects in another code chunk; for example, you might be constructing
an R Markdown report that has a specific place for each code chunk.</p>
<p>Within a single <code>expandChain()</code> call, all <code>metaReactive</code> objects are
guaranteed to only be declared once, even if they're declared on by multiple
meta objects; but since we're making two <code>expandChain()</code> calls, we will end
up with duplicated code. To remove this duplication, we need the second
<code>expandChain</code> call to know what code was emitted in the first <code>expandChain</code>
call.</p>
<p>We can achieve this by creating an "expansion context" and sharing it between
the two calls.</p><div class="sourceCode"><pre><code><span>    <span class="va">exp_ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/expandChain.html">newExpansionContext</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="va">chunk1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/expandChain.html">expandChain</a></span><span class="op">(</span>.expansionContext <span class="op">=</span> <span class="va">exp_ctx</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu">nums</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">chunk2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/expandChain.html">expandChain</a></span><span class="op">(</span>.expansionContext <span class="op">=</span> <span class="va">exp_ctx</span>,</span>
<span>      <span class="fu">obs</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>

<p>After this code is run, <code>chunk1</code> contains only the definition of <code>nums</code> and
<code>chunk2</code> contains only the code for <code>obs</code>.</p>
    </div>
    <div id="substituting-metareactive-objects">
    <h2>Substituting <code>metaReactive</code> objects</h2>
    


<p>Sometimes, when generating code, we want to completely replace the
implementation of a <code>metaReactive</code>. For example, our Shiny app might contain
this logic, using <code><a href="https://rdrr.io/pkg/shiny/man/fileInput.html" class="external-link">shiny::fileInput()</a></code>:</p><div class="sourceCode"><pre><code><span>    <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/metaReactive.html">metaReactive2</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">file_upload</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="../reference/metaExpr.html">metaExpr</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="../reference/dotdot.html">..</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">file_upload</span><span class="op">$</span><span class="va">datapath</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/metaObserve.html">metaObserve</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/dotdot.html">..</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span></code></pre></div>

<p>Shiny's file input works by saving uploading files to a temp directory. The
file referred to by <code>input$file_upload$datapath</code> won't be available when
another user tries to run the generated code.</p>
<p>You can use the expansion context object to swap out the implementation of
<code>data</code>, or any other <code>metaReactive</code>:</p><div class="sourceCode"><pre><code><span>    <span class="va">ec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/expandChain.html">newExpansionContext</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="va">ec</span><span class="op">$</span><span class="fu">substituteMetaReactive</span><span class="op">(</span><span class="va">data</span>, <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="../reference/metaExpr.html">metaExpr</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"data.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="fu"><a href="../reference/expandChain.html">expandChain</a></span><span class="op">(</span>.expansionContext <span class="op">=</span> <span class="va">ec</span>, <span class="fu">obs</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>Result:</p><div class="sourceCode"><pre><code><span>    <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"data.csv"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>

<p>Just make sure this code ends up in a script or Rmd bundle that includes the
uploaded file as <code>data.csv</code>, and the user will be able to reproduce your
analysis.</p>
<p>The <code>substituteMetaReactive</code> method takes two arguments: the <code>metaReactive</code>
object to substitute, and a function that takes zero arguments and returns a
quoted expression (for the nicest looking results, use <code>metaExpr</code> to create
the expression). This function will be invoked the first time the
<code>metaReactive</code> object is encountered (or if the <code>metaReactive</code> is defined
with <code>inline = TRUE</code>, then every time it is encountered).</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p><a href="https://rstudio.github.io/shinymeta/articles/code-generation.html">https://rstudio.github.io/shinymeta/articles/code-generation.html</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"cars"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># varname is only required if srcref aren't supported</span></span></span>
<span class="r-in"><span><span class="co"># (R CMD check disables them for some reason?)</span></span></span>
<span class="r-in"><span><span class="va">mr</span> <span class="op">&lt;-</span> <span class="fu"><a href="metaReactive.html">metaReactive</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="fu"><a href="dotdot.html">..</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">dataset</span><span class="op">)</span>, <span class="st">"package:datasets"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">top</span> <span class="op">&lt;-</span> <span class="fu"><a href="metaReactive.html">metaReactive</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="dotdot.html">..</a></span><span class="op">(</span><span class="fu">mr</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bottom</span> <span class="op">&lt;-</span> <span class="fu"><a href="metaReactive.html">metaReactive</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fu"><a href="dotdot.html">..</a></span><span class="op">(</span><span class="fu">mr</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="metaObserve.html">metaObserve</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Top:"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="dotdot.html">..</a></span><span class="op">(</span><span class="fu">top</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Bottom:"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="dotdot.html">..</a></span><span class="op">(</span><span class="fu">bottom</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simple case</span></span></span>
<span class="r-in"><span><span class="fu">expandChain</span><span class="op">(</span><span class="fu">obs</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mr &lt;- get("cars", "package:datasets")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> top &lt;- head(mr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bottom &lt;- tail(mr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> message("Top:")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> summary(top)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> message("Bottom:")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> summary(bottom)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Explicitly print top</span></span></span>
<span class="r-in"><span><span class="fu">expandChain</span><span class="op">(</span><span class="fu">top</span><span class="op">(</span><span class="op">)</span>, <span class="fu">obs</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mr &lt;- get("cars", "package:datasets")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> top &lt;- head(mr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> top</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bottom &lt;- tail(mr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> message("Top:")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> summary(top)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> message("Bottom:")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> summary(bottom)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Separate into two code chunks</span></span></span>
<span class="r-in"><span><span class="va">exp_ctx</span> <span class="op">&lt;-</span> <span class="fu">newExpansionContext</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">expandChain</span><span class="op">(</span>.expansionContext <span class="op">=</span> <span class="va">exp_ctx</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu">top</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu">bottom</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mr &lt;- get("cars", "package:datasets")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> top &lt;- head(mr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bottom &lt;- tail(mr)</span>
<span class="r-in"><span><span class="fu">expandChain</span><span class="op">(</span>.expansionContext <span class="op">=</span> <span class="va">exp_ctx</span>,</span></span>
<span class="r-in"><span>  <span class="fu">obs</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> message("Top:")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> summary(top)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> message("Bottom:")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> summary(bottom)</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Joe Cheng, Carson Sievert.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

