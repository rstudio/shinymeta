<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Export Domain Logic from Shiny using Meta-Programming • shinymeta</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Export Domain Logic from Shiny using Meta-Programming">
<meta property="og:description" content="Provides tools for capturing logic in a Shiny app and exposing it as code that can be run outside of Shiny (e.g., from an R console). It also provides tools for bundling both the code and results to the end user.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">shinymeta</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/code-generation.html">Code generation</a>
</li>
<li>
  <a href="articles/code-distribution.html">Code distribution</a>
</li>
<li>
  <a href="articles/special-topics.html">Special topics</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rstudio/shinymeta/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="shinymeta">shinymeta<a class="anchor" aria-label="anchor" href="#shinymeta"></a>
</h1></div>
<!-- badges: start -->

<p>The <strong>shinymeta</strong> R package provides tools for capturing logic in a Shiny app and exposing it as code that can be run outside of Shiny (e.g., from an R console). It also provides tools for bundling both the code and results to the end user.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the stable release of <code>shinymeta</code> on CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"shinymeta"</span><span class="op">)</span></span></code></pre></div>
<p>Or, install the development version with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"rstudio/shinymeta"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generating-code-with-shinymeta">Generating code with shinymeta<a class="anchor" aria-label="anchor" href="#generating-code-with-shinymeta"></a>
</h2>
<p>In short, <strong>shinymeta</strong> provides counterparts to Shiny’s reactive building blocks (e.g., <code><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive()</a></code> -&gt; <code><a href="reference/metaReactive.html">metaReactive()</a></code>, <code><a href="https://rdrr.io/pkg/shiny/man/observe.html" class="external-link">observe()</a></code> -&gt; <code><a href="reference/metaObserve.html">metaObserve()</a></code>, <code>render()</code> -&gt; <code><a href="reference/metaRender.html">metaRender()</a></code>) that have the added ability to capture and expose the logic needed to recreate their current state <em>outside of the Shiny runtime</em>. Once the appropriate logic has been captured by these meta-counterparts and reactive reads (e.g., <code>input$var</code>, <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var()</a></code>) have been marked by a special <code><a href="reference/dotdot.html">..()</a></code> operator, then <code><a href="reference/expandChain.html">expandChain()</a></code> can produce code to replicate the state of a particular meta-counterpart (e.g., <code>output$Summary</code>).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/shinymeta/">shinymeta</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectInput</a></span><span class="op">(</span><span class="st">"var"</span>, label <span class="op">=</span> <span class="st">"Choose a variable"</span>, choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cars</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html" class="external-link">verbatimTextOutput</a></span><span class="op">(</span><span class="st">"Summary"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html" class="external-link">verbatimTextOutput</a></span><span class="op">(</span><span class="st">"code"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">var</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/metaReactive.html">metaReactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="va">cars</span><span class="op">[[</span><span class="fu"><a href="reference/dotdot.html">..</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">var</span><span class="op">)</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">Summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/metaRender.html">metaRender</a></span><span class="op">(</span><span class="va">renderPrint</span>, <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="reference/dotdot.html">..</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html" class="external-link">renderPrint</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="reference/expandChain.html">expandChain</a></span><span class="op">(</span><span class="va">output</span><span class="op">$</span><span class="fu">Summary</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></code></pre></div>
<div align="center">
<p><img src="https://i.imgur.com/5gNquPE.gif" width="67%"></p>
</div>
<p>For more details, explanation, and overview <strong>shinymeta</strong> features, see the article on <a href="https://rstudio.github.io/shinymeta/articles/code-generation.html">code generation</a> as well as <a href="https://rstudio.github.io/shinymeta/articles/code-distribution.html">code distribution</a>.</p>
</div>
<div class="section level2">
<h2 id="breaking-changes-in-shinymeta-020">Breaking changes in shinymeta 0.2.0<a class="anchor" aria-label="anchor" href="#breaking-changes-in-shinymeta-020"></a>
</h2>
<p>On August 6, 2019, we introduced a major syntax change into shinymeta, that is not compatible with the previous syntax. If you’re here after watching @jcheng5’s <a href="https://www.youtube.com/watch?v=5KByRC6eqC8" class="external-link">useR2019 talk</a> or reading @zappingseb’s <a href="https://medium.com/data-science/shinymeta-a-revolution-for-reproducibility-bfda6b329f68" class="external-link">blog post</a>, please be aware that the <code>!!</code> operator has been replaced with a <code><a href="reference/dotdot.html">..()</a></code> function. See <a href="https://github.com/rstudio/shinymeta/wiki/Syntax-changes-for-shinymeta-0.2.0" class="external-link">this page</a> for details.</p>
</div>
<div class="section level2">
<h2 id="a-motivating-example">A motivating example<a class="anchor" aria-label="anchor" href="#a-motivating-example"></a>
</h2>
<p>Below is a screen-recording of a Shiny app which allows you to obtain CRAN download statistics for any combination of CRAN packages, look at those downloads using different aggregations, and produce a Rmd-based report <em>with code to reproduce the visualization</em>. This Shiny app is different from most in that it generates R code to reproduce what the user sees in the Shiny app (i.e., notice how the generated report reflects the user’s input).</p>
<p><img src="https://i.imgur.com/DJCCRiP.gif"></p>
<p>We hope this example helps illustrate and inspire several reasons why you might want to generate standalone R code that mimics logic in your Shiny app:</p>
<ul>
<li><p><strong>Automation</strong>: Shiny apps often use data that changes over time: stock quotes, sensor readings, centralized databases, etc. By providing users with reproducible R code, you enable them to take that logic into other workflows, such as creating a <a href="https://support.posit.co/hc/en-us/articles/221266427-Scheduling-emailed-reports-in-Posit-Connect" class="external-link">periodic R Markdown email using RStudio Connect</a> (e.g., the R code generated by the Shiny app above has been tailored so that anyone can re-run the code to acquire the latest download statistics).</p></li>
<li>
<p><strong>Transparency</strong>: By generating code that exposes the core logic of your <strong>shiny</strong> app, you make things more transparent for yourself and others, which has numerous benefits:</p>
<ul>
<li><p><strong>Reassurance</strong>: In the domain of data analysis, it’s usually enough hard to know exactly how a result is derived, and be confident that it’s 100% correct. Unfortunately, wrapping your analysis code in a user interface like Shiny make the situation even worse: the analysis code is now embedded inside a larger system making the overall logic even more error prone and difficult to fully understand. Export the core logic of your analysis can help reassure others (and yourself!) that your work is correct.</p></li>
<li><p><strong>Education</strong>: For example, in the classroom, a student might use a Shiny app interactively to gain intuitive understanding of a statistical concept, then use the code to learn how to use the corresponding function from their own R scripts.</p></li>
<li><p><strong>Enabling</strong>: Shiny is great for enabling others to interface with an R script you’ve written, but what if your users wish to explore things that your interface doesn’t allow for? By exposing the core logic of your app, you make it easier for motivated users to modify and build upon your work in ways you never thought about.</p></li>
<li><p><strong>Documentation</strong>: This one is especially relevant for exploratory analysis apps that allow you to derive insight from a dataset. A great example is the <a href="https://github.com/cpsievert/DIY_ANOVA" class="external-link">ANOVA example app</a>, where you can upload a dataset, run an ANOVA analysis, then download a report with all ANOVA results as well as the code to reproduce it.</p></li>
</ul>
</li>
<li><p><strong>Permanence</strong>: Using a Shiny app can have an ephemeral feeling to it; what happens in the future if the server goes down, or the app’s features change? With a reproducible report, your users can download a more permanent artifact that can be saved locally.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h2>
<p>Many people projects provided motivation, inspiration, and ideas that have lead to <strong>shinymeta</strong>. Thanks especially to Adrian Waddell for inspiring the over-overarching metaprogramming approach and Doug Kelkhoff for his work on <strong>scriptgloss</strong>. Also thanks to Eric Nantz and Xiao Ni for providing feedback and insight on potential applications. We’d also like to acknowledge and highlight other work towards this same goal such as <a href="http://intro-stats.com" class="external-link uri">http://intro-stats.com</a> (Eric Hare and Andee Kaplan) and <a href="https://radiant-rstats.github.io/docs/" class="external-link uri">https://radiant-rstats.github.io/docs/</a> (Vincent Nijs).</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=shinymeta" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/rstudio/shinymeta/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing shinymeta</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Joe Cheng <br><small class="roles"> Author </small>   </li>
<li>Carson Sievert <br><small class="roles"> Maintainer, author </small> <a href="https://orcid.org/0000-0002-4958-2844" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/rstudio/shinymeta/actions" class="external-link"><img src="https://github.com/rstudio/shinymeta/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R build status"></a></li>
<li><a href="https://cran.r-project.org/package=shinymeta" class="external-link"><img src="https://www.r-pkg.org/badges/version/shinymeta" alt="CRAN status"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Joe Cheng, Carson Sievert.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
